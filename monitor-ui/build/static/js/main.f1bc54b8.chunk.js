(this["webpackJsonpmonitor-ui"]=this["webpackJsonpmonitor-ui"]||[]).push([[0],{39:function(e,n,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},40:function(e,n,t){e.exports=t(78)},45:function(e,n,t){},73:function(e,n){},77:function(e,n,t){},78:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t.n(r),o=t(34),a=t.n(o),s=(t(45),t(1)),u=t.n(s),i=t(2),l=t(19),f=t(35),p=t.n(f),m=t(11),h=t(12);function d(){var e=Object(m.a)(["\n  color: red;\n"]);return d=function(){return e},e}function v(){var e=Object(m.a)(["\n  color: yellow;\n"]);return v=function(){return e},e}function b(){var e=Object(m.a)(["\n  font-weight: bold;\n  padding: 10px;\n  border: 3px solid #bbb;\n  margin: 5px;\n  font-size: 28px;\n"]);return b=function(){return e},e}var g=h.a.span(b()),w=Object(h.a)(g)(v()),y=Object(h.a)(g)(d()),x=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(w,null,e.minute),":",c.a.createElement(y,null,e.second))},j="http://localhost:5050/api/redeem",O="http://localhost:5050/api/member",E=function(){var e=Object(i.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(j,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)}).catch((function(e){r(e)}));case 2:e.sent?t("Save redeem to local success"):r("Cannot save redeem to local");case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(O,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)}).catch((function(e){r(e)}));case 2:e.sent?t("Save member to local success"):r("Cannot save member to local");case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("init load data function"),e.next=3,fetch("http://localhost:5050/api/member/server").then((function(e){return e.json()})).then((function(e){console.log("member sync"),console.log(e)})).catch((function(e){return console.log("Cannot get data from "+O)}));case 3:return e.next=5,fetch("http://localhost:5050/api/redeem/server").then((function(e){return e.json()})).then((function(e){console.log("redeem sync"),console.log(e)})).catch((function(e){return console.log("Cannot get data from http://localhost:5050/api/redeem/server")}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=t(39),P=t.n(C),N=(t(77),function(){var e=Object(r.useState)(0),n=Object(l.a)(e,2),t=n[0],o=n[1],a=Object(r.useState)(null),s=Object(l.a)(a,2),f=s[0],m=s[1],h=function(){var e=Object(i.a)(u.a.mark((function e(){var n,t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o((function(e){return e+10})),e.next=3,new Promise(function(){var e=Object(i.a)(u.a.mark((function e(n,t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(O).then((function(e){return e.json()})).catch((function(e){return console.log("Cannot get data from "+O)}));case 2:e.sent?n("member sync up success"):t("member sync up failure");case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()).catch((function(e){return console.log("Error:",e)}));case 3:return n=e.sent,console.log(n),e.next=7,new Promise(function(){var e=Object(i.a)(u.a.mark((function e(n,t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(j).then((function(e){return e.json()})).catch((function(e){return console.log("Cannot get data from "+j)}));case 2:e.sent?n("redeem sync up success"):t("redeem sync up failure");case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()).catch((function(e){return console.log("Error:",e)}));case 7:t=e.sent,console.log(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){S();var e=p()("http://softcrmpkh.dyndns.org:5000");e.on("create_redeem",function(){var e=Object(i.a)(u.a.mark((function e(n){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(n),e.next=3,E(t);case 3:m("get redeem:".concat(t.redeem_code));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),e.on("create_member",function(){var e=Object(i.a)(u.a.mark((function e(n){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(n),e.next=3,k(t);case 3:m("get member:".concat(t.code));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),e.on("error",(function(){console.log("socket connection error")})),setInterval((function(){h()}),1e4)}),[]),c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},c.a.createElement("img",{src:P.a,className:"App-logo",alt:"logo"}),c.a.createElement("div",{style:{marginBottom:"20px",color:"chocolate"}},"Time To Refresh"),c.a.createElement("div",null,function(e){var n,t;return n=(n=parseInt(e/60,10))<10?"0"+n:n,t=(t=parseInt(e%60,10))<10?"0"+t:t,c.a.createElement(x,{minute:n,second:t})}(t)),c.a.createElement("div",{className:"DivButton"},c.a.createElement("button",{onClick:function(){return m("Call API Success"),void o(0)},className:"Button"},"Refresh Sync API Service",c.a.createElement("br",null),"http://softcrmpkh.dyndns.org:5000")),f&&c.a.createElement("div",null,f)))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.f1bc54b8.chunk.js.map